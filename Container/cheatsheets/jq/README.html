<h2 id="jq-cheatsheet">JQ Cheatsheet</h2>
<p>Data:</p>
<div class="sourceCode" id="cb1">
  <pre
    class="sourceCode json"
  ><code class="sourceCode json"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">&quot;images&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">      <span class="dt">&quot;creation_date&quot;</span><span class="fu">:</span> <span class="st">&quot;2019-01-03T14:52:34.514699+00:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">      <span class="dt">&quot;default_bootscript&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="dt">&quot;kernel&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.10.254/kernel/arm64/1.2.1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">        <span class="dt">&quot;initrd&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.42.254/initrd/initrd-Linux-arm64-v3.14.6.gz&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-8" title="8">        <span class="dt">&quot;architecture&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-9" title="9">        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64 1.2.1&quot;</span></a>
<a class="sourceLine" id="cb1-10" title="10">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-11" title="11">      <span class="dt">&quot;arch&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-12" title="12">      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;x6cevb6f-fe18-475f-4b92-x8ce51f92051&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-13" title="13">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ubuntu xenial&quot;</span></a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-16" title="16">      <span class="dt">&quot;creation_date&quot;</span><span class="fu">:</span> <span class="st">&quot;2019-01-03T14:52:34.514699+00:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-17" title="17">      <span class="dt">&quot;default_bootscript&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-18" title="18">        <span class="dt">&quot;kernel&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.10.254/kernel/arm64/1.2.2&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-19" title="19">        <span class="dt">&quot;initrd&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.10.254/initrd/initrd-Linux-arm64-v3.14.6.gz&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-20" title="20">        <span class="dt">&quot;architecture&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-21" title="21">        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64 1.2.2&quot;</span></a>
<a class="sourceLine" id="cb1-22" title="22">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-23" title="23">      <span class="dt">&quot;arch&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-24" title="24">      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;x3ce2buf-fe58-47bf-8b52-c8cv51nn2050&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-25" title="25">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;alpine&quot;</span></a>
<a class="sourceLine" id="cb1-26" title="26">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-28" title="28">      <span class="dt">&quot;creation_date&quot;</span><span class="fu">:</span> <span class="st">&quot;2019-01-03T14:52:34.514699+00:00&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-29" title="29">      <span class="dt">&quot;default_bootscript&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb1-30" title="30">        <span class="dt">&quot;kernel&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.10.254/kernel/arm64/1.2.1&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-31" title="31">        <span class="dt">&quot;initrd&quot;</span><span class="fu">:</span> <span class="st">&quot;http://169.254.10.254/initrd/initrd-Linux-arm64-v3.14.6.gz&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-32" title="32">        <span class="dt">&quot;architecture&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-33" title="33">        <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;amd64 1.2.1&quot;</span></a>
<a class="sourceLine" id="cb1-34" title="34">      <span class="fu">},</span></a>
<a class="sourceLine" id="cb1-35" title="35">      <span class="dt">&quot;arch&quot;</span><span class="fu">:</span> <span class="st">&quot;arm64&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-36" title="36">      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;x3cf2bbf-fe08-947f-8bf2-c8ce51f92050&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb1-37" title="37">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ubuntu xenial&quot;</span></a>
<a class="sourceLine" id="cb1-38" title="38">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb1-39" title="39">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="fu">}</span></a></code></pre>
</div>
<p>Return the data under the image array:</p>
<div class="sourceCode" id="cb2">
  <pre
    class="sourceCode bash"
  ><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="fu">cat</span> data.json <span class="kw">|</span> <span class="ex">jq</span> <span class="st">&#39;.images[]&#39;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="st">&quot;creation_date&quot;</span>: <span class="st">&quot;2019-01-03T14:52:34.514699+00:00&quot;</span>,</a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="st">&quot;default_bootscript&quot;</span>: <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">      <span class="st">&quot;kernel&quot;</span>: <span class="st">&quot;http://169.254.10.254/kernel/arm64/1.2.1&quot;</span>,</a>
<a class="sourceLine" id="cb2-7" title="7">      <span class="st">&quot;initrd&quot;</span>: <span class="st">&quot;http://169.254.42.254/initrd/initrd-Linux-arm64-v3.14.6.gz&quot;</span>,</a>
<a class="sourceLine" id="cb2-8" title="8">      <span class="st">&quot;architecture&quot;</span>: <span class="st">&quot;arm64&quot;</span>,</a>
<a class="sourceLine" id="cb2-9" title="9">      <span class="st">&quot;title&quot;</span>: <span class="st">&quot;arm64 1.2.1&quot;</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="kw">}</span>,</a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="st">&quot;arch&quot;</span>: <span class="st">&quot;arm64&quot;</span>,</a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="st">&quot;id&quot;</span>: <span class="st">&quot;x6cevb6f-fe18-475f-4b92-x8ce51f92051&quot;</span>,</a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="st">&quot;name&quot;</span>: <span class="st">&quot;ubuntu xenial&quot;</span></a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="kw">}</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-16" title="16"> <span class="ex">...</span></a></code></pre>
</div>
<p>Return only data relevant with arch: amd64:</p>
<div class="sourceCode" id="cb3">
  <pre
    class="sourceCode bash"
  ><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1">$ <span class="fu">cat</span> data.json <span class="kw">|</span> <span class="ex">jq</span> <span class="st">&#39;.images[] | select(.arch == &quot;amd64&quot;)&#39;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="st">&quot;creation_date&quot;</span>: <span class="st">&quot;2019-01-03T14:52:34.514699+00:00&quot;</span>,</a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="st">&quot;default_bootscript&quot;</span>: <span class="kw">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="st">&quot;kernel&quot;</span>: <span class="st">&quot;http://169.254.10.254/kernel/amd64/1.2.1&quot;</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="st">&quot;initrd&quot;</span>: <span class="st">&quot;http://169.254.10.254/initrd/initrd-Linux-amd64-v3.14.6.gz&quot;</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="st">&quot;architecture&quot;</span>: <span class="st">&quot;amd64&quot;</span>,</a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="st">&quot;title&quot;</span>: <span class="st">&quot;amd64 1.2.1&quot;</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="kw">}</span>,</a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="st">&quot;arch&quot;</span>: <span class="st">&quot;amd64&quot;</span>,</a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="st">&quot;id&quot;</span>: <span class="st">&quot;x3cf2bbf-fe08-947f-8bf2-c8ce51f92050&quot;</span>,</a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="st">&quot;name&quot;</span>: <span class="st">&quot;ubuntu xenial&quot;</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="kw">}</span></a></code></pre>
</div>
<p>Only return the id value from our query:</p>
<div class="sourceCode" id="cb4">
  <pre
    class="sourceCode bash"
  ><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1">$ <span class="fu">cat</span> data.json <span class="kw">|</span> <span class="ex">jq</span> <span class="st">&#39;.images[] | select(.arch == &quot;amd64&quot;) | .id&#39;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">&quot;x3cf2bbf-fe08-947f-8bf2-c8ce51f92050&quot;</span></a></code></pre>
</div>
<p>We can do similar with (<code>contains</code>, <code>startswith</code>):</p>
<pre><code>$ cat data.json | jq &#39;.images[] | select(.arch | contains(&quot;amd&quot;)) | .id&#39;
$ cat data.json | jq &#39;.images[] | select(.arch | startswith(&quot;md6&quot;)) | .id&#39;</code></pre>
<p>For loops with jq:</p>
<pre><code>$ echo &#39;{&quot;Records&quot;: [{&quot;Data&quot;: &quot;abc&quot;, &quot;PartitionKey&quot;: &quot;123&quot;}, {&quot;Data&quot;: &quot;def&quot;, &quot;PartitionKey&quot;: &quot;456&quot;}]}&#39; | jq -c &#39;.Records[]&#39;
{&quot;Data&quot;:&quot;abc&quot;,&quot;PartitionKey&quot;:&quot;123&quot;}
{&quot;Data&quot;:&quot;def&quot;,&quot;PartitionKey&quot;:&quot;456&quot;}</code></pre>
<p>For loop and base64 encode them:</p>
<pre><code>$ echo &#39;{&quot;Records&quot;: [{&quot;Data&quot;: &quot;abc&quot;, &quot;PartitionKey&quot;: &quot;123&quot;}, {&quot;Data&quot;: &quot;def&quot;, &quot;PartitionKey&quot;: &quot;456&quot;}]}&#39; | jq -cr &#39;.Records[].Data | @base64&#39;
YWJj
ZGVm</code></pre>
<p>Check if a string exists in a array:</p>
<pre><code>$ echo &#39;[&quot;superfast&quot;,&quot;fast&quot;,&quot;slow&quot;]&#39; | jq -c &#39;.[] | select(. | contains(&quot;fast&quot;))&#39;
&quot;superfast&quot;
&quot;fast&quot;</code></pre>
<p>Check if a string exists in a array of dictionaries:</p>
<pre><code>$ echo &#39;[{&quot;speed&quot;: &quot;superfast&quot;},{&quot;speed&quot;: &quot;fast&quot;},{&quot;speed&quot;: &quot;slow&quot;}]&#39; | jq -c &#39;.[] | select(.speed | contains(&quot;fast&quot;))&#39;
{&quot;speed&quot;:&quot;superfast&quot;}
{&quot;speed&quot;:&quot;fast&quot;}</code></pre>

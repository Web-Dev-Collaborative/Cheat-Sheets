<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" href="./prism.css">
<script async defer src="./prism.js"></script>
</head>
<body>;
<h3 id="creating-promises-q.promise">Creating promises (Q.promise)</h3>
<pre><code>Q.promise (ok, fail) =&gt;
  asyncFunction -&gt;
    if error
      fail new Error(&quot;Failure&quot;)
    else
      ok(data)</code></pre>
<h3 id="for-arrays">For arrays</h3>
<pre><code>promises = [saveDisk(), saveCloud()]

# When all succeeds, or *at least one* error
Q.all(promises).done -&gt;
  alert &quot;Saved&quot;

# Same, but get the values
Q.all(promises).spread (a, b) -&gt;
  alert &quot;Result A:&quot; + a
  alert &quot;Result B:&quot; + b

# When all either succeeds or errors
Q.allSettled(promises).done -&gt; ...</code></pre>
<h3 id="creating-promises-from-node">Creating promises from Node</h3>
<pre><code># Works like .call() or .apply()

Q.nfcall(FS.readFile, &#39;foo.txt&#39;, &#39;utf-8&#39;)
.then -&gt; ...

Q.nfapply(FS.readFile, [&#39;foo.txt&#39;, &#39;utf-8&#39;])
.then -&gt; ...

Q.npost(FS, &#39;readFile&#39;, [&#39;foo.txt, &#39;utf-8&#39;])
.then -&gt; ...

Q.npost(FS, &#39;readFile&#39;, &#39;foo.txt, &#39;utf-8&#39;)
.then -&gt; ...

readFile = Q.denodeify(FS.readFile)
readFile(&#39;foo.txt&#39;).then -&gt; ...</code></pre>
<h3 id="promises-to-node-async">Promises to Node async</h3>
<pre><code>createUser = (next) -&gt;
  promiseMaker()
  .nodeify(next)</code></pre>
<h3 id="promise-sugars">Promise sugars</h3>
<pre><code># Shortcut for .then(ok, fail, progress)
promise
.then (data) -&gt;
.catch (err) -&gt;
.progress (percent) -&gt;</code></pre>
<h3 id="try">Try</h3>
<p>Q.try -&gt; promise()</p>
<p>.catch (e) -&gt; console.error “Oh well”, e</p>
<h3 id="reference">Reference</h3>
<ul>
<li>https://github.com/kriskowal/q/wiki/API-Reference</li>
</ul>
</body></html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" href="./prism.css">
<script async defer src="./prism.js"></script>
</head>
<body>;
<h3 id="reference">Reference</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">app</span>.<span class="at">use</span>(<span class="kw">function</span> <span class="op">*</span> (next) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">var</span> ctx <span class="op">=</span> <span class="kw">this</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="va">ctx</span>.<span class="at">request</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="va">ctx</span>.<span class="at">response</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="va">ctx</span>.<span class="at">body</span> <span class="op">=</span> <span class="st">&#39;hello&#39;</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="va">ctx</span>.<span class="va">state</span>.<span class="at">user</span> <span class="op">=</span> <span class="kw">yield</span> <span class="va">User</span>.<span class="at">find</span>(id).<span class="at">fetch</span>()</a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11">  <span class="va">ctx</span>.<span class="va">cookies</span>.<span class="at">set</span>(<span class="st">&#39;foo&#39;</span><span class="op">,</span> <span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">signed</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="va">ctx</span>.<span class="va">cookies</span>.<span class="at">get</span>(<span class="st">&#39;foo&#39;</span>)</a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="va">ctx</span>.<span class="at">throw</span>(<span class="dv">403</span>)</a></code></pre></div>
<h3 id="request">Request</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1">  <span class="va">ctx</span>.<span class="at">header</span>        <span class="co">// ctx.headers</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">ctx</span>.<span class="at">method</span>        <span class="co">// and =</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="va">ctx</span>.<span class="at">url</span>           <span class="co">// and =</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="va">ctx</span>.<span class="at">originalUrl</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="va">ctx</span>.<span class="at">origin</span>        <span class="co">// =&gt; &#39;http://example.com&#39;</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="va">ctx</span>.<span class="at">href</span>          <span class="co">// =&gt; &#39;http://example.com/foo?q=hello&#39;</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="va">ctx</span>.<span class="at">path</span>          <span class="co">// and =</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="va">ctx</span>.<span class="at">query</span>         <span class="co">// { q: &#39;hello&#39; }</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="va">ctx</span>.<span class="at">query</span>         <span class="co">// and =</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="va">ctx</span>.<span class="at">querystring</span></a>
<a class="sourceLine" id="cb2-11" title="11">  <span class="va">ctx</span>.<span class="at">querystring</span>   <span class="co">// and =</span></a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="va">ctx</span>.<span class="at">host</span></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="va">ctx</span>.<span class="at">hostname</span></a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="va">ctx</span>.<span class="at">fresh</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="va">ctx</span>.<span class="at">stale</span></a>
<a class="sourceLine" id="cb2-16" title="16">  <span class="va">ctx</span>.<span class="at">socket</span></a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="va">ctx</span>.<span class="at">protocol</span></a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="va">ctx</span>.<span class="at">secure</span></a>
<a class="sourceLine" id="cb2-19" title="19">  <span class="va">ctx</span>.<span class="at">ip</span></a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="va">ctx</span>.<span class="at">ips</span></a>
<a class="sourceLine" id="cb2-21" title="21">  <span class="va">ctx</span>.<span class="at">subdomains</span></a>
<a class="sourceLine" id="cb2-22" title="22">  <span class="va">ctx</span>.<span class="at">is</span>()                  <span class="co">// .is(&#39;html&#39;) .is(&#39;text/html&#39;)</span></a>
<a class="sourceLine" id="cb2-23" title="23">  <span class="va">ctx</span>.<span class="at">accepts</span>()             <span class="co">// .accepts(&#39;html&#39;) .accepts(&#39;html&#39;, &#39;json&#39;)</span></a>
<a class="sourceLine" id="cb2-24" title="24">  <span class="va">ctx</span>.<span class="at">acceptsEncodings</span>()    <span class="co">// .acceptsEncodings(&#39;gzip&#39;)</span></a>
<a class="sourceLine" id="cb2-25" title="25">  <span class="va">ctx</span>.<span class="at">acceptsCharsets</span>()</a>
<a class="sourceLine" id="cb2-26" title="26">  <span class="va">ctx</span>.<span class="at">acceptsLanguages</span>()</a>
<a class="sourceLine" id="cb2-27" title="27">  <span class="va">ctx</span>.<span class="at">get</span>()</a>
<a class="sourceLine" id="cb2-28" title="28"></a>
<a class="sourceLine" id="cb2-29" title="29">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">type</span>          <span class="co">// =&gt; &#39;image/jpg&#39;</span></a>
<a class="sourceLine" id="cb2-30" title="30">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">charset</span>       <span class="co">// =&gt; &#39;utf-8&#39;</span></a>
<a class="sourceLine" id="cb2-31" title="31">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">protocol</span>      <span class="co">// =&gt; &#39;https&#39;</span></a>
<a class="sourceLine" id="cb2-32" title="32">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">secure</span>        <span class="co">// =&gt; true</span></a>
<a class="sourceLine" id="cb2-33" title="33">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">ip</span>            <span class="co">// (supports X-Forwarded-For if app.proxy)</span></a>
<a class="sourceLine" id="cb2-34" title="34">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">ips</span></a>
<a class="sourceLine" id="cb2-35" title="35">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">subdomains</span></a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">fresh</span></a>
<a class="sourceLine" id="cb2-38" title="38">  <span class="va">ctx</span>.<span class="va">request</span>.<span class="at">stale</span></a></code></pre></div>
<h3 id="response">Response</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1">  <span class="va">ctx</span>.<span class="at">body</span> <span class="op">=</span> <span class="st">&#39;hello&#39;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="va">ctx</span>.<span class="at">throw</span>(<span class="dv">403</span>)</a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="va">ctx</span>.<span class="at">throw</span>(<span class="st">&#39;name required&#39;</span><span class="op">,</span> <span class="dv">403</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="va">ctx</span>.<span class="at">throw</span>(<span class="dv">403</span><span class="op">,</span> <span class="st">&#39;name required&#39;</span>)</a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="va">ctx</span>.<span class="at">throw</span>(<span class="st">&#39;oops&#39;</span>)</a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="va">ctx</span>.<span class="at">assert</span>(<span class="va">ctx</span>.<span class="va">state</span>.<span class="at">user</span><span class="op">,</span> <span class="dv">401</span><span class="op">,</span> <span class="st">&#39;You must log in&#39;</span>)</a></code></pre></div>
<h3 id="middlewares">Middlewares</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">exports</span>.<span class="at">conditionalGet</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-conditional-get&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="va">exports</span>.<span class="at">responseTime</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-response-time&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="va">exports</span>.<span class="at">ratelimit</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-ratelimit&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="va">exports</span>.<span class="at">compress</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-compress&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="va">exports</span>.<span class="at">rewrite</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-rewrite&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="va">exports</span>.<span class="at">favicon</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-favicon&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="va">exports</span>.<span class="at">session</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-session&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="va">exports</span>.<span class="at">static</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-static&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="va">exports</span>.<span class="at">logger</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-logger&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="va">exports</span>.<span class="at">mount</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-mount&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="va">exports</span>.<span class="at">etag</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;koa-etag&#39;</span>)<span class="op">;</span></a></code></pre></div>
</body></html>
